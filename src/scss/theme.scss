@use "@angular/material" as mat;
@use "sass:map";
@use "utilities";
@use "media";

// Создание темы с новым синтаксисом
@include mat.core();

// Светлая тема
$mat-light-theme: mat.define-theme((
  color: (
    theme-type: light,
    primary: mat.$azure-palette,
    tertiary: mat.$blue-palette,
  )
));

// Темная тема
$mat-dark-theme: mat.define-theme((
  color: (
    theme-type: dark,
    primary: mat.$azure-palette,
    tertiary: mat.$blue-palette,
  )
));

// Применяем светлую тему по умолчанию
@include mat.all-component-themes($mat-light-theme);

// Базовые CSS переменные
:root {
  // Основные цвета приложения
  --app-background: #ffffff;
  --app-text: #212121;
  --app-surface: #f8f9fa;
  --app-border: #e0e0e0;

  // Дополнительные цвета
  --app-card-bg: #ffffff;
  --app-hover: rgba(0, 0, 0, 0.04);
  --app-shadow: rgba(0, 0, 0, 0.1);
  --app-success: #2e7d32;

  // Цвета для конкретных элементов
  --app-header-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --app-footer-bg: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
  --app-sidebar-bg: #f5f5f5;
  --app-input-bg: #ffffff;
  --app-button-bg: #1976d2;
  --app-button-text: #ffffff;

  // Градиенты для дашборда
  --dashboard-gradient-light: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --dashboard-gradient-dark: linear-gradient(135deg, #1e1b4b 0%, #3730a3 100%);

  // Переменные для компонентов дашборда
  --dashboard-card-bg-light: rgba(255, 255, 255, 0.95);
  --dashboard-card-bg-dark: rgba(30, 30, 30, 0.95);
  --dashboard-card-text-light: #1f2937;
  --dashboard-card-text-dark: #f9fafb;
  --dashboard-card-secondary-light: #6b7280;
  --dashboard-card-secondary-dark: #d1d5db;
  --dashboard-stat-card-bg-light: rgba(255, 255, 255, 0.9);
  --dashboard-stat-card-bg-dark: rgba(30, 30, 30, 0.9);

  // Акцентные цвета (общие для всех тем)
  --accent-primary: #4f46e5;
  --accent-secondary: #7c3aed;
  --accent-gradient: linear-gradient(135deg, #667eea, #764ba2);

  // Размеры и отступы
  --header-height: 70px;
  --footer-padding: 60px 0 40px;
  --border-radius: 12px;
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.15);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.2);
  --transition: all 0.3s ease;
}

// Светлая тема
.light-theme {
  @include mat.all-component-themes($mat-light-theme);

  // Для дашборда
  --dashboard-card-bg: var(--dashboard-card-bg-light);
  --dashboard-card-text: var(--dashboard-card-text-light);
  --dashboard-card-secondary: var(--dashboard-card-secondary-light);
  --dashboard-stat-card-bg: var(--dashboard-stat-card-bg-light);
}

// Темная тема
.dark-theme {
  @include mat.all-component-colors($mat-dark-theme);

  // CSS переменные для темной темы
  --app-background: #121212;
  --app-text: #ffffff;
  --app-surface: #1e1e1e;
  --app-border: #333333;
  --app-card-bg: #1e1e1e;
  --app-hover: rgba(255, 255, 255, 0.04);
  --app-shadow: rgba(0, 0, 0, 0.3);
  --app-success: #4caf50;
  --app-header-bg: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  --app-footer-bg: linear-gradient(135deg, #111827 0%, #1f2937 100%);
  --app-sidebar-bg: #1a1a1a;
  --app-input-bg: #2d2d2d;
  --app-button-bg: #bb86fc;
  --app-button-text: #000000;

  // Для дашборда
  --dashboard-card-bg: var(--dashboard-card-bg-dark);
  --dashboard-card-text: var(--dashboard-card-text-dark);
  --dashboard-card-secondary: var(--dashboard-card-secondary-dark);
  --dashboard-stat-card-bg: var(--dashboard-stat-card-bg-dark);
}

// Авто тема
.auto-theme {
  @include mat.all-component-themes($mat-light-theme);

  // По умолчанию светлая тема
  --dashboard-card-bg: var(--dashboard-card-bg-light);
  --dashboard-card-text: var(--dashboard-card-text-light);
  --dashboard-card-secondary: var(--dashboard-card-secondary-light);
  --dashboard-stat-card-bg: var(--dashboard-stat-card-bg-light);

  @media (prefers-color-scheme: dark) {
    @include mat.all-component-colors($mat-dark-theme);

    --app-background: #121212;
    --app-text: #ffffff;
    --app-surface: #1e1e1e;
    --app-border: #333333;
    --app-card-bg: #1e1e1e;
    --app-hover: rgba(255, 255, 255, 0.04);
    --app-shadow: rgba(0, 0, 0, 0.3);
    --app-success: #4caf50;
    --app-header-bg: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
    --app-footer-bg: linear-gradient(135deg, #111827 0%, #1f2937 100%);
    --app-sidebar-bg: #1a1a1a;
    --app-input-bg: #2d2d2d;
    --app-button-bg: #bb86fc;
    --app-button-text: #000000;

    // Для дашборда
    --dashboard-card-bg: var(--dashboard-card-bg-dark);
    --dashboard-card-text: var(--dashboard-card-text-dark);
    --dashboard-card-secondary: var(--dashboard-card-secondary-dark);
    --dashboard-stat-card-bg: var(--dashboard-stat-card-bg-dark);
  }
}

// Стили для тулбаров
.mat-toolbar,
.mat-mdc-toolbar {
  background: var(--app-header-bg);
  color: white;
}

// Стили для snackbar уведомлений
.success-snackbar {
  background: #4caf50;
  color: white;

  .mat-simple-snackbar-action {
    color: #e8f5e9;
  }
}

.error-snackbar {
  background: #f44336;
  color: white;

  .mat-simple-snackbar-action {
    color: #ffebee;
  }
}

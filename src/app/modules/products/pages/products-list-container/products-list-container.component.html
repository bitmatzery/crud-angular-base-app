<ng-container *ngIf="(filteredItems$ | async) as items; else loading">
  <div class="container-header" *ngIf="displayType === DisplayType.PRODUCTS">
    <div class="filters-info">
      <span *ngIf="(selectedCategory$ | async) as category" class="category-badge">
        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ category.name }}
        <button (click)="clearAllFilters()" class="clear-btn">√ó</button>
      </span>
      <span *ngIf="searchFilterValue" class="search-badge">
        –ü–æ–∏—Å–∫: "{{ searchFilterValue }}"
        <span *ngIf="searchResultsCount$ | async as count" class="results-count">
          (–Ω–∞–π–¥–µ–Ω–æ: {{ count }})
        </span>
        <button (click)="clearAllFilters()" class="clear-btn">√ó</button>
      </span>
      <span *ngIf="searchFilterValue" class="search-note">
        üîç –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º
      </span>
    </div>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ -->
  <div
    #scrollContainer
    class="scroll-container"
    [class.scrollable]="displayType === DisplayType.PRODUCTS"
    [class.categories-container]="displayType === DisplayType.CATEGORIES">

    <product-list-ui
      [items]="items"
      [displayType]="displayType"
      [selectedCategory]="selectedCategory$ | async"
      (filterItems)="onFilteredItems($event)"
      (categoryItems)="onCategorySelect($event)">
    </product-list-ui>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ -->
    <div *ngIf="displayType === DisplayType.PRODUCTS && (loadingProducts$ | async)" class="loading-more">
      <div class="spinner"></div>
      <span>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</span>
    </div>
  </div>
</ng-container>

<ng-template #loading>
  <div class="loading-container">
    <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  </div>
</ng-template>

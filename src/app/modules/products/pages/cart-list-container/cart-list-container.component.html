<div class="cart-container">
  <div class="container-app">
    <!-- Заголовок -->
    <div class="cart-header">
      <h1 class="cart-title">
        <mat-icon class="cart-title-icon">shopping_cart</mat-icon>
        Моя корзина
      </h1>

      <div class="cart-stats">
        <span class="items-count">{{ cartItemsDetails.length }} товара</span>
        <button
          mat-button
          color="warn"
          (click)="onClearCart()"
          [disabled]="cartItemsDetails.length === 0"
          class="clear-cart-btn"
        >
          <mat-icon>delete_sweep</mat-icon>
          Очистить корзину
        </button>
      </div>
    </div>

    <!-- Загрузка -->
    <div *ngIf="isLoading" class="loading-overlay">
      <mat-progress-spinner diameter="50" mode="indeterminate"></mat-progress-spinner>
      <p>Загружаем вашу корзину...</p>
    </div>

    <!-- Содержимое корзины -->
    <div *ngIf="!isLoading" class="cart-content">
      <!-- Пустая корзина -->
      <div *ngIf="cartItemsDetails.length === 0" class="empty-cart">
        <mat-icon class="empty-cart-icon">shopping_cart</mat-icon>
        <h2>Ваша корзина пуста</h2>
        <p>Добавьте товары из каталога, чтобы сделать заказ</p>
        <button
          mat-raised-button
          color="primary"
          class="shopping-btn"
          (click)="onContinueShopping()"
        >
          <mat-icon>store</mat-icon>
          Перейти к покупкам
        </button>
      </div>

      <!-- Корзина с товарами -->
      <div *ngIf="cartItemsDetails.length > 0" class="cart-with-items">
        <div class="cart-layout">
          <!-- Левая колонка: товары -->
          <div class="cart-items-column">
            <cart-list-ui
              [cartItems]="cartItemsDetails"
              [subtotal]="subtotal"
              [shipping]="shipping"
              [total]="total"
              (updateQuantity)="onUpdateQuantity($event)"
              (removeItem)="onRemoveItem($event)"
              (proceedToCheckout)="onProceedToCheckout()"
              (continueShopping)="onContinueShopping()"
            ></cart-list-ui>
          </div>

          <!-- Правая колонка: итоги и промо -->
          <div class="cart-summary-column">
            <!-- Итоги заказа -->
            <mat-card class="summary-card">
              <mat-card-header>
                <mat-card-title>Итоги заказа</mat-card-title>
              </mat-card-header>
              <mat-divider></mat-divider>
              <mat-card-content>
                <div class="summary-row">
                  <span>Товары ({{ cartItemsDetails.length }})</span>
                  <span class="summary-value">{{ subtotal | currency:'$ ':'symbol':'1.0-0' }}</span>
                </div>
                <div class="summary-row">
                  <span>Доставка</span>
                  <span class="summary-value" [class.free]="shipping === 0">
                    {{ shipping === 0 ? 'Бесплатно' : (shipping | currency:'$ ':'symbol':'1.0-0') }}
                  </span>
                </div>
                <div *ngIf="shipping === 0" class="free-shipping-info">
                  <mat-icon>local_shipping</mat-icon>
                  <span>Бесплатная доставка при заказе от $ 5000 </span>
                </div>
                <mat-divider></mat-divider>
                <div class="summary-row total-row">
                  <span>Итого</span>
                  <span class="summary-value total-value">{{ total | currency:'$ ':'symbol':'1.0-0' }}</span>
                </div>
              </mat-card-content>
              <mat-card-actions>
                <button
                  mat-raised-button
                  color="primary"
                  class="checkout-btn"
                  (click)="onProceedToCheckout()"
                >
                  <mat-icon>shopping_bag</mat-icon>
                  Оформить заказ
                </button>
              </mat-card-actions>
            </mat-card>

            <!-- Промокод -->
            <mat-card class="promo-card">
              <mat-card-header>
                <mat-card-title>
                  <mat-icon>local_offer</mat-icon>
                  Промокод
                </mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <div class="promo-input">
                  <input
                    type="text"
                    placeholder="Введите промокод"
                    class="promo-field"
                  >
                  <button mat-button color="primary" class="apply-promo-btn">
                    Применить
                  </button>
                </div>
                <div class="promo-hint">
                  <mat-icon>info</mat-icon>
                  <span>Доступные промокоды: SUMMER10, WELCOME15</span>
                </div>
              </mat-card-content>
            </mat-card>

            <!-- Гарантии -->
            <mat-card class="guarantee-card">
              <mat-card-content>
                <div class="guarantee-item">
                  <mat-icon class="guarantee-icon">local_shipping</mat-icon>
                  <div class="guarantee-text">
                    <h3>Быстрая доставка</h3>
                    <p>1-3 дня по всей стране</p>
                  </div>
                </div>
                <mat-divider></mat-divider>
                <div class="guarantee-item">
                  <mat-icon class="guarantee-icon">verified</mat-icon>
                  <div class="guarantee-text">
                    <h3>Гарантия качества</h3>
                    <p>14 дней на возврат</p>
                  </div>
                </div>
                <mat-divider></mat-divider>
                <div class="guarantee-item">
                  <mat-icon class="guarantee-icon">support_agent</mat-icon>
                  <div class="guarantee-text">
                    <h3>Поддержка 24/7</h3>
                    <p>Помощь по любым вопросам</p>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
